package ngs.view{  import flash.display.MovieClip;  import com.greensock.TweenLite;  import com.greensock.easing.*;  import com.greensock.loading.LoaderMax;  import com.greensock.loading.XMLLoader;  import com.greensock.loading.SWFLoader;  import com.greensock.events.LoaderEvent;  import com.greensock.loading.display.ContentDisplay;  import flash.net.URLRequest;  import flash.events.Event;     public class Preloader extends MovieClip  {    public var loader:SWFLoader = new SWFLoader("framework.swf", { name: "framework_swf", autoDispose: true, onProgress: progressHandler, onComplete: transitionOut } );    public var display:MovieClip = new MovieClip();        public function Preloader()    {      init();      transitionIn();    }        public function init():void    {      percent.alpha = 0;      display.x = stage.stageWidth / 2;      display.y = stage.stageHeight / 2;            addChild(display);          }        public function spawn(event:Event = null):void    {      var loaderBlock:LoaderBlock = new LoaderBlock();      loaderBlock.addEventListener(LoaderBlock.TRANSITION_DONE, spawn);      loaderBlock.init();      display.addChild(loaderBlock);    }        public function transitionIn():void    {      block.scaleX = block.scaleY = 0;      TweenLite.to(percent, 0, { alpha: 1, ease: Expo.easeOut, delay: 0.5 } );      TweenLite.to(block, 0.5, { scaleX: 1, scaleY: 1, ease: Expo.easeOut, onComplete: transitionInComplete });    }        public function transitionInComplete():void    {      trace("loading");      loader.load();    }        public function transitionOut(event:LoaderEvent):void    {      TweenLite.to(percent, 0.25, { alpha: 0, ease: Back.easeIn } );      TweenLite.to(block, 0.5, { scaleX: 0, scaleY: 0, ease: Back.easeIn, onComplete: transitionOutComplete, delay: 0.1 } );    }        public function transitionOutComplete():void    {            addChild(loader.getContent("framework_swf"));    }        public function progressHandler(event:LoaderEvent):void    {      trace(event.target.progress);      percent.text = String(Math.round(event.target.progress * 100));      TweenLite.to(block, 0.1, { scaleX: 1 + (event.target.progress / 2.5), scaleY: 1 + (event.target.progress / 2.5), ease: Expo.easeOut } );    }  }}